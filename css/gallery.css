/* ================== GALERÍA (scoped) ================== */
.comp-gallery .gallery-wrapper{
  background:#f8f6f1;
  font-family:"Comic Neue", serif;
  padding:40px;
  text-align:center;
}

.comp-gallery #brillo{
  font-size:40px; font-weight:bold;
  color:#ffb600;
  animation:brillo 3s infinite;
}
@keyframes brillo{
  0%,10%{ background-position:-1000px; }
  20%{ background-position:left; }
  90%{ background-position:right; }
  100%{ background-position:1000px; }
}

/* Lienzo polaroid */
.comp-gallery .galeria{
  width:260px;
  aspect-ratio:1/1;
  margin:24px auto 0;
  position:relative;
  perspective: 800px;
}

/* Polaroid base */
.comp-gallery .galeria img{
  position:absolute; inset:0;
  width:100%; height:100%;
  object-fit:cover;
  border:10px solid #fff;
  border-bottom:28px solid #fff;  /* base más ancha */
  border-radius:6px;
  box-shadow: 0 10px 22px rgba(0,0,0,.18);
  transform-origin:center;
  opacity:0; z-index:0;
  will-change: transform, opacity;
}

/* Estado visible */
.comp-gallery .galeria img.is-show{
  opacity:1; z-index:1;
  animation: polaroid-in .6s cubic-bezier(.2,.8,.2,1);
  transform: rotate(var(--rot, 2deg)) translateZ(0);
}

/* Al salir */
.comp-gallery .galeria img.is-leave{
  z-index:0;
  animation: polaroid-out .45s ease forwards;
}

/* Tenue detrás (stack) */
.comp-gallery .galeria img.is-stack{
  opacity:.12;
  filter: saturate(.8) brightness(.95);
  transform: rotate(var(--stack-rot, -3deg));
}

/* Animaciones */
@keyframes polaroid-in{
  from{
    opacity:0;
    transform: translateY(-36px) rotate(-8deg) scale(.96);
    box-shadow: 0 24px 36px rgba(0,0,0,.22);
  }
  to{
    opacity:1;
    transform: rotate(var(--rot, 2deg)) scale(1);
    box-shadow: 0 10px 22px rgba(0,0,0,.18);
  }
}
@keyframes polaroid-out{
  0%{ opacity:1; transform: rotate(var(--rot, 2deg)) scale(1); }
  100%{ opacity:0; transform: translateY(36px) rotate(8deg) scale(.96); }
}

/* Botón "Ver todas" */
.comp-gallery .gallery-showall{
  margin:18px auto 0;
  padding:10px 16px;
  border:0; border-radius:10px;
  background:#ffd84d; color:#333;
  font:600 14px/1 system-ui, sans-serif;
  box-shadow:0 6px 14px rgba(0,0,0,.08);
  cursor:pointer;
  transition: transform .05s ease, background .2s ease;
}
.comp-gallery .gallery-showall:hover{ background:#ffcc33; }
.comp-gallery .gallery-showall:active{ transform: translateY(1px); }

/* Evitar scroll del body cuando hay overlays */
body.no-scroll{ overflow:hidden; }

/* ================== OVERLAY "SEE ALL" (GLOBAL) ================== */
.gallery-overlay[hidden]{ display:none; }
.gallery-overlay{
  position: fixed; inset:0; z-index:1100;
  display:grid; grid-template-rows:auto 1fr;
  background: rgba(0,0,0,.35);
  backdrop-filter: blur(6px);
  padding:18px;
}

/* Botón cerrar overlay */
.gallery-overlay .go-close{
  justify-self:end;
  border:0; background:#fff; color:#333;
  width:36px; height:36px; border-radius:10px;
  box-shadow:0 6px 14px rgba(0,0,0,.12);
  cursor:pointer; font-size:16px; font-weight:700;
}

/* Grilla de miniaturas tipo polaroid */
.gallery-overlay .go-grid{
  overflow:auto; margin-top:10px;
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(140px,1fr));
  gap:14px; padding-bottom:10px;
}
.gallery-overlay .go-grid figure{
  background:#fff; border-radius:8px;
  padding:8px 8px 18px;
  box-shadow:0 10px 22px rgba(0,0,0,.18);
  transform: rotate(var(--r, 0deg));
}
.gallery-overlay .go-grid img{
  width:100%; aspect-ratio:1/1; object-fit:cover;
  display:block; border-radius:6px;
}

/* ================== LIGHTBOX (GLOBAL) ================== */
.lightbox{
  position: fixed; inset:0; z-index:1200;
  display:none; align-items:center; justify-content:center;
  background: rgba(0,0,0,.85);
  padding: clamp(12px, 3vw, 32px);
}
.lightbox.open{ display:flex; }

.lightbox img{
  max-width: min(92vw, 1100px);
  max-height: 88vh;
  border-radius:10px;
  box-shadow: 0 20px 60px rgba(0,0,0,.5);
  background:#000; object-fit:contain;
  cursor: zoom-out;
}

/* Controles del lightbox */
.lb-btn{
  position:absolute; top:16px;
  width:42px; height:42px; border:0; border-radius:999px;
  background: rgba(255,255,255,.15); color:#fff; cursor:pointer;
  display:grid; place-items:center; font-size:22px;
  backdrop-filter: blur(4px);
}
.lb-close{ right:16px; }
.lb-prev, .lb-next{
  top:50%; transform: translateY(-50%);
  width:46px; height:46px; font-size:26px;
}
.lb-prev{ left:18px; }
.lb-next{ right:18px; }
.lb-btn:hover{ background: rgba(255,255,255,.28); }
